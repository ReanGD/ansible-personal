---
- name: Custom setup
  setup:
    gather_subset:
      - '!all'
      - '!any'

- name: Set common facts
  set_fact:
    main_user: rean

- name: Find board uuid
  shell: cat /sys/class/dmi/id/product_name
  register: reg_product_name
  changed_when: false
  become: yes

- name: Set archhost facts
  set_fact:
    notebook: False
    add_dop_user: False
    install_lan: True
    install_wifi: False
    boot_ssd: True
    hostname_id: "archhost"
  when: reg_product_name.stdout == 'MS-7978'

- name: Set archnote facts (xiaomi)
  set_fact:
    notebook: True
    add_dop_user: True
    install_lan: False
    install_wifi: True
    boot_ssd: True
    hostname_id: "archnote"
  when: reg_product_name.stdout == 'TM1613'

- name: Set archsrv facts
  set_fact:
    notebook: False
    add_dop_user: False
    install_lan: True
    install_wifi: False
    boot_ssd: False
    hostname_id: "archsrv"
  when: reg_product_name.stdout == 'System Product Name'
